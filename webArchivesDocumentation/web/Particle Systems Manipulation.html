<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- saved from url=(0113)https://web.archive.org/web/20160408233100/http://delta3d.org/article.php?story=20060622140124995&topic=tutorials -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"><script src="./Particle Systems Manipulation_files/cb=gapi.loaded_2" async=""></script><script src="./Particle Systems Manipulation_files/cb=gapi.loaded_1" async=""></script><script id="twitter-wjs" src="./Particle Systems Manipulation_files/widgets.js.download"></script><script id="facebook-jssdk" src="./Particle Systems Manipulation_files/all.js.download"></script><script src="./Particle Systems Manipulation_files/cb=gapi.loaded_0" async=""></script><script src="./Particle Systems Manipulation_files/analytics.js.download" type="text/javascript"></script>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app12.us.archive.org';v.server_ms=818;archive_analytics.send_pageview({});});</script><script type="text/javascript" src="./Particle Systems Manipulation_files/playback.bundle.js.download" charset="utf-8"></script>
<script type="text/javascript" src="./Particle Systems Manipulation_files/wombat.js.download" charset="utf-8"></script>
<script type="text/javascript">
  __wm.init("https://web.archive.org/web");
  __wm.wombat("http://delta3d.org/article.php?story=20060622140124995&topic=tutorials","20160408233100","https://web.archive.org/","web","/_static/",
	      "1460158260");
</script>
<link rel="stylesheet" type="text/css" href="./Particle Systems Manipulation_files/banner-styles.css">
<link rel="stylesheet" type="text/css" href="./Particle Systems Manipulation_files/iconochive.css">
<!-- End Wayback Rewrite JS Include -->

    <title>
	    Particle Systems Manipulation - delta3d
    </title>
    
    <meta name="revisit-after" content="2 days">
    <meta name="robots" content="index,follow">
    <meta name="publisher" content="delta3d">
    <meta name="copyright" content="delta3d">
    <meta name="author" content="delta3d">
    <meta name="distribution" content="global">
	<meta http-equiv="Content-Script-Type" content="text/javascript">
	<meta http-equiv="Content-Style-Type" content="text/css">
	<!-- <meta http-equiv="Pragma" content="no-cache"> -->

    <link rel="SHORTCUT ICON" href="https://web.archive.org/web/20160408233100im_/http://delta3d.org/images/favicon.ico">

	

	<link rel="home" href="http://delta3d.org/" title="Home">
<link rel="search" href="https://web.archive.org/web/20160408233100/http://delta3d.org/search.php" title="Advanced Search">
<link rel="contents" href="http://delta3d.org/directory.php" title="Directory">
<link rel="service" type="application/atomsvc+xml" href="http://delta3d.org/webservices/atom/?introspection" title="Webservices">

	<link rel="stylesheet" type="text/css" href="./Particle Systems Manipulation_files/css.php" media="all">
<link rel="stylesheet" type="text/css" href="./Particle Systems Manipulation_files/style.css">
<link rel="canonical" href="https://web.archive.org/web/20160408233100/http://delta3d.org/article.php?story=20060622140124995">
<!--
<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:trackback="http://madskills.com/public/xml/rss/module/trackback/"
         xmlns:dc="http://purl.org/dc/elements/1.1/">
<rdf:Description
    rdf:about="http://delta3d.org/article.php?story=20060622140124995"
    trackback:ping="http://delta3d.org/trackback.php?id=20060622140124995"
    dc:title="Particle Systems Manipulation"
    dc:identifier="http://delta3d.org/article.php?story=20060622140124995" />
</rdf:RDF>
-->

<!-- Include CSS for Forum -->
<link rel="stylesheet" type="text/css" href="./Particle Systems Manipulation_files/forum.css">
<link rel="stylesheet" type="text/css" href="./Particle Systems Manipulation_files/smilies.css.php">
<link rel="stylesheet" type="text/css" href="./Particle Systems Manipulation_files/style(1).css">
<link rel="stylesheet" type="text/css" href="./Particle Systems Manipulation_files/QapTcha.jquery.css" media="screen">
	<script type="text/javascript" src="./Particle Systems Manipulation_files/plusone.js.download" gapi_processed="true"></script>
	
	<link rel="stylesheet" type="text/css" href="./Particle Systems Manipulation_files/css.php">

    <!--[if lte IE 6]>
        <link rel="stylesheet" type="text/css" href="http://delta3d.org/layout/purepro/css/ie6.css" title="purepro"{xthml}>
    <![endif]-->
    <!--[if IE 7]>
        <link rel="stylesheet" type="text/css" href="http://delta3d.org/layout/purepro/css/ie7.css" title="purepro"{xthml}>
    <![endif]-->

</head>
<body dir="ltr" id="purepro"><!-- BEGIN WAYBACK TOOLBAR INSERT -->
<style type="text/css">
body {
  margin-top:0 !important;
  padding-top:0 !important;
  /*min-width:800px !important;*/
}
</style>
<script>__wm.rw(0);</script>
<div id="wm-ipp-base" lang="en" style="display: block; direction: ltr;">
</div><div id="donato" style="position:relative;width:100%;">
  <div id="donato-base">
    <iframe id="donato-if" src="./Particle Systems Manipulation_files/donate.html" scrolling="no" frameborder="0" style="width:100%; height:100%">
    </iframe>
  </div>
</div><script type="text/javascript">
__wm.bt(625,27,25,2,"web","http://delta3d.org/article.php?story=20060622140124995&topic=tutorials","20160408233100",1996,"/_static/",["/_static/css/banner-styles.css?v=bsmaklHF","/_static/css/iconochive.css?v=qtvMKcIJ"]);
  __wm.rw(1);
</script>
<!-- END WAYBACK TOOLBAR INSERT -->
<div id="body_layer1"><div id="body_layer2"><div id="body_layer3">
<div>
    <a name="top"></a>
    <a href="https://web.archive.org/web/20160408233100/http://delta3d.org/article.php?story=20060622140124995&amp;topic=tutorials#content-start"> <!-- for screenreaders -->
        <img class="hidden" src="./Particle Systems Manipulation_files/speck.gif" alt="{skip_navigation}">
    </a>
</div>
<!-- End of htmlheader.thtml --><!-- Start of header.thtml -->
    <div id="gl_container">

        <div id="gl_header">
		<div id="header-site-logo-graphic">
	
	<a href="https://web.archive.org/web/20160408233100/http://delta3d.org/" title="delta3d"><img src="./Particle Systems Manipulation_files/images.php" alt="delta3d"></a>
	
</div>
		
        </div> <!-- end of gl_header -->
		
        
		
        <div id="gl_menu" style="display:block">
            <ul>
            <li><a href="https://web.archive.org/web/20160408233100/http://delta3d.org/search.php"><span>Advanced Search</span></a></li>
<li><a href="https://web.archive.org/web/20160408233100/http://delta3d.org/directory.php?topic=tutorials"><span>Directory</span></a></li>
<li><a href="https://web.archive.org/web/20160408233100/http://delta3d.org/api/"><span>API docs</span></a></li>
<li><a href="https://web.archive.org/web/20160408233100/http://delta3d.org/article.php?story=20050720155458456&amp;topic=tutorials"><span>Tutorials</span></a></li>
<li><a href="https://web.archive.org/web/20160408233100/http://delta3d.org/deltawiki"><span>Wiki</span></a></li>
<li><a href="https://web.archive.org/web/20160408233100/https://sourceforge.net/projects/delta3d/files/"><span>Download</span></a></li>
<li><a href="https://web.archive.org/web/20160408233100/http://delta3d.org/forum"><span>Forum</span></a></li>
<li><a href="https://web.archive.org/web/20160408233100/http://delta3d.org/usersettings.php"><span>My Account</span></a></li>

            </ul>
        </div>  <!-- end of gl_menu -->

		<div id="glmenu_plugin" style="display:none">
		 
	    </div>
		
		<div id="navman_plugin" style="display:none">
		
		
	    </div>
		
		<div id="gl_content_container">

        <div id="gl_wrapper">
            <div id="gl_content-wide-left">

<!-- START OF CONTENT AREA -->
                <a name="content-start" id="content-start"></a><!--for screenreaders -->
				<!-- Start of Breadcrumbs Navigation -->
<p>
</p><div itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
    <a href="https://web.archive.org/web/20160408233100/http://delta3d.org/index.php" itemprop="url">
    <span itemprop="title">Home</span>
</a> &gt;
<span itemprop="child" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
    <a href="https://web.archive.org/web/20160408233100/http://delta3d.org/index.php?topic=tutorials" itemprop="url">
    <span itemprop="title">Tutorials</span>
</a> 



</span>




</div>
<p></p>
<!-- End of Breadcrumbs Navigation -->

				
<!-- End of header.thtml -->
        <div class="story">
	<span class="story-icons">  
        
        
        
        
    </span>
    <h1>Particle Systems Manipulation</h1>
	<div class="story-information">
    	<a class="storybyline" href="https://web.archive.org/web/20160408233100/http://delta3d.org/users.php?mode=profile&amp;uid=659" rel="author">Morgas</a> Thursday, June 22 2006 @ 09:01 PM UTC Views: 12,815  
    </div>
    <div class="story-body">
        This tutorial is a followup to the <a href="https://web.archive.org/web/20160408233100/http://www.delta3d.org/article.php?story=20060620123144266&amp;topic=tutorials" target="_blank">GM Tutorial</a>, and will teach you how to manipulate particle systems through code.
<p>

Note*- this is for version 1.3 of the delta3d code base.<br><br></p><h2><b>Introduction: </b></h2><p>

All particle effects can be made this way through the PSE, and loaded on models for effects. Currently, the only control you have is to turn the emitter on and off. Having control over our particles allows users to feel more immersed in the game or simulation. Anything such as wind speed, to temperature, to even a sound presence could trigger an event causing our particles to act differently. This tutorial will allow you to do just that, such as changing colors, velocity’s, lifetimes, mass, and so much more!
</p><p>

For this demonstration we will be changing the particle trail behind the tank according to the tanks speed. This will make the dust particles stay up in the air longer when you’re driving faster, just like in real life! You should already have the particle effect we’ll be using from the previous tutorial. This is the particle editor that we use to create our effects with.
</p><p>
<img width="480" height="283" src="./Particle Systems Manipulation_files/20060622140124995_2.jpg" alt="">
<br>
</p><p>

</p><p>
</p><h2><b>Particle Know How:</b></h2> How do we get at our particle data?
<p>
Note: The following code is wrapped up already in dtCore::ParticleSystem SetupLayers function. This is to show how to access this and give you a better sense to what we are getting to. Once the particle is initialized the user will be dealing with each of the separate layers through the GetSingleLayer(“Layer 0”), function call.
</p><p>
Getting to the particle data requires us to work directly with the OpenSceneGraph(OSG) code. Once in the OSG code, we will search through the particles systems, find the one we want to change, and change it. Might be easier said then done, so let’s jump in!
</p><p>
First we will declare a class that will hold all of our particle info, for each layer of our particle system. The class will hold the following member variables that are the meat of the particle system class. This class will be called ParticleLayer
</p><p>

<i>From dtCore::ParticleSystem (h and cpp)</i>
</p><p>
</p><pre><code>
/**
* The geode that holds the drawable particle system, and whose name is
* the name of the layer.
*/
RefPtr&lt;osg::Geode&gt; mGeode;

/**
* The active particle system.
*/
RefPtr&lt;osgParticle::ParticleSystem&gt; mParticleSystem;

/**
* The transform that controls the position of the emitter.
*/
RefPtr&lt;osg::MatrixTransform&gt; mEmitterTransform;

/**
* The active emitter.
*/
RefPtr&lt;osgParticle::ModularEmitter&gt; mModularEmitter;

/**
* The active program.
* Can be modular or fluid
*/
RefPtr&lt;osgParticle::Program&gt; mProgram;

/**
* Name of the layer
*/
std::string mstrLayerName;

</code></pre>
<p>

All of the above variables are filled in during the SetupParticleLayers functions. They each serve a purpose that you can manipulate to adjust the particle effect. Filling this class in is not hard from the outside, but the code is not set up in a hierarchal form you would expect. 
</p><p>

The following method is called when you create a particle system by the LoadFile method, and never needs to be called directly. Once LoadFile is complete, you can use the ParticleLayer class to change the values you want to be different. You do not need to write this code, but is provided to help you understand the OSG particle system’s guts.
</p><p>
<i>From dtCore::ParticleSystem (h and cpp)</i>
</p><p>
</p><pre><code>
/**
 *  Called from LoadFile() function, should never be called
 *  from user
 */
void ParticleSystem::SetupParticleLayers()
{
   // particle system group of the root note from the loaded particle 
   // system file. will only be valid after you call load file on an 
   // object, thus its protected
   osg::Group* newParticleSystemGroup = (osg::Group*)mLoadedFile.get();

   // node we are going to reuse over and over again to search through 
   // all the children of the osg root node
   osg::Node*  searchingNode = NULL;
   
   // iterating through children var
   unsigned int i = 0;

</code></pre>
<p>

<i><b>Note:</b></i> that we will be looping through all the children twice, this is done once to setup the initial particle system, and then a second time to set the other variables to tie in with it. Its done like this since we could be getting the children in any order, but need to know the particle system layer variable before the others.
</p><p>

</p><pre><code>
   // Not everything has a name.... which sucks. usually only the geode
   // we will bind the geode name to the whole class with newly 
   // created var mstrLayername
   // Osg checks for the same particle system, instead of names
   for(i=0;i&lt;newParticleSystemGroup-&gt;getNumChildren();i++)
   {
      searchingNode = newParticleSystemGroup-&gt;getChild(i);
      ParticleLayer layer;

      if(dynamic_cast&lt;osgParticle::ParticleSystemUpdater*&gt;(searchingNode))
      {
        // This is when you import multiple osg files in one system. 
        // This wont be done in delta3d since it was set up where 
        // you can only load in 1  per system. Which makes sense. 
        // One for each file could be loaded, to tell the system everything 
        // else is in here.
      }

      // See if this is the particle system of the geode
      if(dynamic_cast&lt;osg::Geode*&gt;(searchingNode))
      {
         // well its a geometry node.
         layer.mGeode = (osg::Geode*)searchingNode;

         // see if the geometry node has drawables that are the 
         // particle system we are looking for
         for(unsigned int j=0;j&lt;layer.mGeode-&gt;getNumDrawables();j++)
         {
             osg::Drawable* drawable    = layer.mGeode-&gt;getDrawable(j);

             // seems like we found the particle system, continue on!
             if(dynamic_cast&lt;osgParticle::ParticleSystem*&gt;(drawable))
             {
                layer.mParticleSystem = (osgParticle::ParticleSystem*)drawable;
                layer.mstrLayerName     = layer.mGeode-&gt;getName();

               // We're done setting values up, push it onto the list
               mlLayers.push_back(layer);
             }
         }
      } // end if                        
   }// end for loop
      
   // we do this in two seperate processes since the top particle 
   // system nodes and the cousins could be in any order.
   for(i=0;i&lt;newParticleSystemGroup-&gt;getNumChildren();i++)
   {
      searchingNode = newParticleSystemGroup-&gt;getChild(i);

      // Node can't be a matrix and a program
      // reason for if / else if
      if(dynamic_cast&lt;osg::MatrixTransform*&gt;(searchingNode))
      {
         // the transform in space
       osg::MatrixTransform* newEmitterTransform = 
            (osg::MatrixTransform*)searchingNode;

         for(unsigned int j=0;j&lt;newEmitterTransform-&gt;getNumChildren();j++)
         {
            osg::Node* childNode = newEmitterTransform-&gt;getChild(j);

             if(dynamic_cast&lt;osgParticle::ModularEmitter*&gt;(childNode))
             {
    osgParticle::ModularEmitter* newModularEmitter = 
                   (osgParticle::ModularEmitter*)childNode;
               
               // Go through the populated particle system list and 
               // see where this belongs too.
               for(std::list&lt;ParticleLayer&gt;::iterator layerIter = mlLayers.begin();
               layerIter != mlLayers.end(); layerIter++)
               {
                  // check for pointers, osg comparison
                  if(layerIter-&gt;mParticleSystem == newModularEmitter-&gt;getParticleSystem())
                  {
                     // set the data in our layer
                     layerIter-&gt;mEmitterTransform    = newEmitterTransform;
                     layerIter-&gt;mModularEmitter      = newModularEmitter;
                  }
               }
            }
         } // end for loop
      } // end if check

      // particle cant be a fluid and modular program
      // reason for else if/ else if
      else if(dynamic_cast&lt;osgParticle::ModularProgram*&gt;(searchingNode))
      {
         osgParticle::ModularProgram* newModularProgram = (osgParticle::ModularProgram*)searchingNode;
         // Go through the populated particle system list and 
         // see where this belongs too.
         for(std::list&lt;ParticleLayer&gt;::iterator layerIter = mlLayers.begin();
         layerIter != mlLayers.end(); layerIter++)
         {
            // check for pointers, osg comparison
            if(layerIter-&gt;mParticleSystem == newModularProgram-&gt;getParticleSystem())
            {
               // set the data in our layer
               layerIter-&gt;SetModoluarProgram(true);
               layerIter-&gt;mProgram  = newModularProgram;
               break;
            }
         } // end for loop
      } // end if check
      // check and see if this is a fluid program
      else if(dynamic_cast&lt;osgParticle::FluidProgram*&gt;(searchingNode))
      {
         osgParticle::FluidProgram* newFluidProgram = (osgParticle::FluidProgram*)searchingNode;
         // Go through the populated particle system list and 
         // see where this belongs too.
         for(std::list&lt;ParticleLayer&gt;::iterator layerIter = mlLayers.begin(); 
               layerIter != mlLayers.end(); layerIter++)
         {
            // check for pointers, osg comparison
            if(layerIter-&gt;mParticleSystem == newFluidProgram-&gt;getParticleSystem())
            {
               // set the data in our layer
               layerIter-&gt;SetFluidProgram(true);
               layerIter-&gt;mProgram  = newFluidProgram;
               break;
            }
         } // end for loop
      } // end if check
   } // end for loop
}// end function call
</code></pre>
<p>

From here, we have a list of all the particle layers loaded in through our OSG file. Each of the effects in the file is on a different ParticleLayer in a std::list. Getting the layer back to change all the effects put in, is as simple as calling GetSingleLayer() and sending in a string of the name you want.
</p><p>

This will return to you a reference to the ParticleLayer, which in turn will give you access to change anything you could want with the particle effects. What we want is in the default Particle. 
</p><p>

<b></b></p><h2><b>Hierarchal Overview:</b></h2>
<p>

For the most part, everything in our class is under the Particle Processor section. Its a common base interface for those classes which need to do something on particles. 
Such classes are, for example emitter (particle generation) and program (particle animation). This class holds some properties, like a reference frame and a reference to a ParticleSystem; descendant classes should process the particles taking into account the reference frame, computing the right transformations when needed. 
</p><p>

<a href="https://web.archive.org/web/20160408233100/http://www.openscenegraph.org/documentation/OpenSceneGraphReferenceDocs/classosgParticle_1_1ParticleProcessor.html">OpenScene Graph Documentation For the Overview</a>
</p><p>

</p><h2><b>OSG Particle System:</b></h2>
<p>
Our osg particle system is mostly a utility class. This class can tell you to freeze the whole system, return the number of particles, determine on what type of surface they are drawn on, etc. Utilizing this system would work great on a game that uses freeze frame / stop animation, and you can freeze your particle system to give you good effects.
</p><p>
<a href="https://web.archive.org/web/20160408233100/http://www.openscenegraph.org/documentation/OpenSceneGraphReferenceDocs/classosgParticle_1_1ParticleSystem.html">OpenScene Graph Documentation For the particle system</a>
</p><p>
</p><h2><b>The Default Particle:</b></h2>
<p>
Let it be known that all Particles are made off of a Template Particle. That is, the settings that were first loaded in through file, make a default Template Particle, that all particles copy from. Through OSG the Default Template is just like any other Particle, except it is used as the template to create each new particle. Now lets move on.
</p><p>
To get access to the default particle we must go through the Particle System and get it from there. Consequently when you’re done, you should be putting the default particle back into the Particle System for all new particles to take advantage of your changes. Since we are returning everything by reference however, in this situation you will not have to feed it back into the system.
</p><p>
The following a list of some of the members you can change on the Default particle.
</p><p>
void setLifeTime (double t) Set the life time of the particle. 
<br>
void setSizeRange (const rangef &amp;r) Set the minimum and maximum values for polygon size. 
<br>
void setAlphaRange (const rangef &amp;r) Set the minimum and maximum values for alpha. 
<br>
void setColorRange (const rangev4 &amp;r) Set the minimum and maximum values for color. 
<br>
void setSizeInterpolator (Interpolator *ri) Set the interpolator for computing size values. 
<br>
void setAlphaInterpolator (Interpolator *ai) Set the interpolator for computing alpha values.
<br>
void setColorInterpolator (Interpolator *ci) Set the interpolator for computing color values
<br>
void setRadius (float r) Set the physical radius of the particle.
<br>
void setMass (float m) Set the mass of the particle.
<br>
void setPosition (const osg::Vec3 &amp;p) Set the position vector. 
<br>
void setVelocity (const osg::Vec3 &amp;v) Set the velocity vector.
</p><p>
For A full list of everything on a particle, follow this link:
</p><p>
<a href="https://web.archive.org/web/20160408233100/http://www.openscenegraph.org/documentation/OpenSceneGraphReferenceDocs/classosgParticle_1_1Particle.html">OpenScene Graph Documentation for a particle class</a>
</p><p>

Once you are done changing values, simply reinsert the particle into the Default particle Template, and all new particles created off that template / emitter will have the desired effects you want. Note that this will not change the current particles you have in effect. Typically, the old particles and new particles blend together naturally.	
</p><p>

</p><h2><b>Modular Emitter:</b></h2>
<p>
The modular emitter is used to determine the amount of particles you can make, or how much it has to make to catch up to when you lag by frame time or another abnormality occurs. Changing this amount would give you the effect of spawning more particles or spawning less. This would be great to use on a fire growing and dampening over time.
</p><p>

This emitter has a Shooter and a Placer object contained within. Placers are where the particles are made at, while shooters control where they go after they have been “Placed”.
</p><p>
<a href="https://web.archive.org/web/20160408233100/http://www.openscenegraph.org/documentation/OpenSceneGraphReferenceDocs/classosgParticle_1_1ModularEmitter.html">OpenScene Graph Documentation for a modular emitter</a>
</p><p>

<b></b></p><h2><b>Emitter Transform:</b></h2>
<p>
The emitter transform is used to move the emitter around and is the position of it. A way you could use this, is if you had a ship sailing down the river and wanted to create different wave effects from the offset of the ship. 
</p><p>
<a href="https://web.archive.org/web/20160408233100/http://www.openscenegraph.org/documentation/OpenSceneGraphReferenceDocs/classosg_1_1Transform.html">OpenScene Graph Documentation for a transform</a>
</p><p>
</p><h2><b>Setting the layer:</b></h2>
<p>
Since we caught the variable by reference through GetSingleLayer() all changes will be made without calling a set method. However if in your code, you ever need to set the layer back in you can call SetSingleLayer().
</p><p>

<b></b></p><h2><b>Interacts with tank simulation:</b></h2>
<p>
Through the tank simulation program, we are going to change the dusty smoke trail attached to the tank, to provide more realism based on the velocity of the tank. In short, we’re going to make the Life Time of the particles short or longer based on the speed of the tank.
</p><p>
On the MoveTheTank function of the tank, I added the following:
</p><p>
</p><pre><code>
//particle fun
if(mDust.valid() &amp;&amp; mIsEngineRunning &amp;&amp; mVelocity != 0)
{
   // Get the layer we want
   dtCore::ParticleLayer&amp; pLayerToSet = *mDust-&gt;GetSingleLayer("Layer 0");
      
   // make a temp var for changing particle default template.
   osgParticle::Particle&amp; defaultParticle = pLayerToSet.GetParticleSystem().getDefaultParticleTemplate();

   // do our funky changes
   float lifetime = max(2.0f, abs(mVelocity) * .4f);
   defaultParticle.setLifeTime(lifetime);
   

   // for some added fun you can add in this line to create lots of 
   // particles, feel free to change the float value around to see 
   // the differences you can make       
   pLayerToSet.GetModularEmitter().setNumParticlesToCreateMovementCompenstationRatio(abs(mVelocity) * 0.10f);    
}

</code></pre>
<p>
And there you go, now when you move your tank around you will have your particles change according to the speed of your vehicle. Neato!
</p><p>

<img width="742" height="613" src="./Particle Systems Manipulation_files/20060622140124995_1.jpg" alt="">
<br>
</p><p>

Here you can find the complete Tutorial Zip From the GM tutorial, you will have to manually add in the particle effects code listed above : <a href="https://web.archive.org/web/20160408233100/http://www.delta3d.org/filemgmt/visit.php?lid=50">Link</a></p><p>

		</p><p></p>
		<div style="clear:both;"></div>
		<div style="float:left;" id="fb-root"></div>
		<script>(function(d, s, id) {
		  var js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return;
		  js = d.createElement(s); js.id = id;
		  js.src = "//web.archive.org/web/20160408233100/http://connect.facebook.net/en_EN/all.js#xfbml=1";
		  fjs.parentNode.insertBefore(js, fjs);
		}(document, 'script', 'facebook-jssdk'));</script>
	    <div style="float:left;margin-right:10px;"><fb:like href="http://delta3d.org/article.php?story=20060622140124995" send="false" layout="button_count" width="90" show_faces="false"></fb:like></div>
		<div style="float:left;margin-right:-20px;"><a href="https://web.archive.org/web/20160408233100/https://twitter.com/share" class="twitter-share-button" data-url="https://web.archive.org/web/20160408233100/http://delta3d.org/article.php?story=20060622140124995" data-text="Particle Systems Manipulation" data-counturl="http://delta3d.org/article.php?story=20060622140124995" data-lang="en" data-size="small" data-count="hortizontal">Tweet</a>
        </div><script>!function(d,s,id) { var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)) { js=d.createElement(s);js.id=id;js.src="https://web.archive.org/web/20160408233100/https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs); } }(document,"script","twitter-wjs");</script>
		<div style="position: absolute; width: 450px; left: -10000px;" id="___plusone_0"><iframe frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position:absolute;top:-10000px;width:450px;margin:0px;border-style:none" tabindex="0" vspace="0" width="100%" id="I0_1460158324854" name="I0_1460158324854" src="./Particle Systems Manipulation_files/fastbutton.html" allow="autoplay &#39;self&#39;; fullscreen &#39;self&#39;"></iframe></div><div style="float:left;" class="g-plusone" data-size="medium" data-href="http://delta3d.org/article.php?story=20060622140124995" data-gapiscan="true" data-onload="true" data-gapistub="true"></div>
		<div style="position: absolute; width: 450px; left: -10000px;" id="___plus_0"><iframe frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position:absolute;top:-10000px;width:450px;margin:0px;border-style:none" tabindex="0" vspace="0" width="100%" id="I1_1460158324861" name="I1_1460158324861" src="./Particle Systems Manipulation_files/sharebutton.html" allow="autoplay &#39;self&#39;; fullscreen &#39;self&#39;"></iframe></div><div class="g-plus" data-action="share" data-annotation="bubble" data-href="http://delta3d.org/article.php?story=20060622140124995" data-gapiscan="true" data-onload="true" data-gapistub="true"></div>
		<div style="clear:both;"></div>
		<div style="margin-top:5px;">
                
        </div>
    </div>
	<div class="clearboth"></div>
</div>


		<div class="clearboth"></div>
		  <div id="story-whatsrelatedandoptions">
            <div id="story-whatsrelated"><!-- start blockheader-related.thtml -->
<div class="block-box-left">
    <span class="block-helpicon">
        
    </span>
    <h2>What's Related</h2>
<ul class="list-whats-related">
  <li><a href="https://web.archive.org/web/20160408233100/http://www.delta3d.org/article.php?story=20060620123144266&amp;topic=tutorials">GM Tutorial</a></li>
  <li><a href="https://web.archive.org/web/20160408233100/http://www.openscenegraph.org/documentation/OpenSceneGraphReferenceDocs/classosgParticle_1_1ParticleProcessor.html">OpenScene Graph Documen...</a></li>
  <li><a href="https://web.archive.org/web/20160408233100/http://www.openscenegraph.org/documentation/OpenSceneGraphReferenceDocs/classosgParticle_1_1ParticleSystem.html">OpenScene Graph Documen...</a></li>
  <li><a href="https://web.archive.org/web/20160408233100/http://www.openscenegraph.org/documentation/OpenSceneGraphReferenceDocs/classosgParticle_1_1Particle.html">OpenScene Graph Documen...</a></li>
  <li><a href="https://web.archive.org/web/20160408233100/http://www.openscenegraph.org/documentation/OpenSceneGraphReferenceDocs/classosgParticle_1_1ModularEmitter.html">OpenScene Graph Documen...</a></li>
  <li><a href="https://web.archive.org/web/20160408233100/http://www.openscenegraph.org/documentation/OpenSceneGraphReferenceDocs/classosg_1_1Transform.html">OpenScene Graph Documen...</a></li>
  <li><a href="https://web.archive.org/web/20160408233100/http://www.delta3d.org/filemgmt/visit.php?lid=50">Link</a></li>
  <li><a href="https://web.archive.org/web/20160408233100/http://delta3d.org/search.php?mode=search&amp;type=stories&amp;author=659">More by Morgas</a></li>
  <li><a href="https://web.archive.org/web/20160408233100/http://delta3d.org/search.php?mode=search&amp;type=stories&amp;topic=tutorials">More from Tutorials</a></li>

</ul>
</div>
<div style="clear:both;"></div>

</div>
            <div id="story-storyoptions"><!-- start blockheader-related.thtml -->
<div class="block-box-left">
    <span class="block-helpicon">
        
    </span>
    <h2>Story Options</h2>
<ul class="list-story-options">
  <li><a href="https://web.archive.org/web/20160408233100/http://delta3d.org/profiles.php?sid=20060622140124995&amp;what=emailstory">Mail Story to a Friend</a></li>
  <li><a href="https://web.archive.org/web/20160408233100/http://delta3d.org/article.php?story=20060622140124995&amp;mode=print" rel="nofollow">Printable Story Format</a></li>

</ul>
</div>
<div style="clear:both;"></div>

</div>
		  </div>
		<div class="clearboth"></div>
		<div id="comments">
        
		</div>
		<div id="story-trackbacks"><h2><a name="trackback">Trackback</a></h2>
<p>Trackback URL for this entry: http://delta3d.org/trackback.php?id=20060622140124995</p>
No trackback comments for this entry.

</div>

	<!-- END OF CONTENT AREA -->
            </div> <!-- end of gl_content -->
        </div> <!-- end of gl_wrapper -->
<!-- Start of Left blocks -->
    <div id="gl_navigation">
        <div class="block-columnpad"><div class="block-box-left">
    <span class="block-helpicon-left">
        
    </span>
    <h2 class="block-title-left">News</h2>
<a href="https://web.archive.org/web/20160408233100/http://caperholdings.com/contracting-services" target="_blank">Need Professional Support?</a>

</div><div class="block-box-left">
    <span class="block-helpicon-left">
        
    </span>
    <h2 class="block-title-left">About delta3d</h2>
delta3d is a game and simulation engine appropriate for a wide variety of simulation and entertainment applications.  delta3d uses best-of-breed open source technologies to create a fully integrated game engine and with content creation tools.<a href="https://web.archive.org/web/20160408233100/http://delta3d.org/index.php?topic=about">MORE</a>
</div><div class="block-box-left">
    <span class="block-helpicon-left">
        <a href="https://web.archive.org/web/20160408233100/http://caperholdings.com/sponsor-delta3d" class="blocktitle"><img src="./Particle Systems Manipulation_files/button_help.png" alt="?"></a>
    </span>
    <h2 class="block-title-left">Sponsor delta3d</h2>
For the past few years Caper Holdings LLC has been solely driving development of delta3d. To continue to provide upgrades and releases we are allowing the community to purchase <a href="https://web.archive.org/web/20160408233100/http://caperholdings.com/sponsor-delta3d">sponsorships</a>
</div><div class="block-box-left">
    <span class="block-helpicon-left">
        
    </span>
    <h2 class="block-title-left">Twitter</h2>
<a class="twitter-timeline" href="https://web.archive.org/web/20160408233100/https://twitter.com/delta3d" data-widget-id="510256513730875393">Tweets by @delta3d</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id))}(document,"script","twitter-wjs");</script>
</div><div class="block-box-left">
    <span class="block-helpicon-left">
        
    </span>
    <h2 class="block-title-left">User Functions</h2>
<!-- loginform.thtml -->

<div id="login_form">
	<h2 id="login_button" class="login_options">
		<a style="padding-right:20px;" href="https://web.archive.org/web/20160408233100/http://delta3d.org/article.php?story=20060622140124995&amp;topic=tutorials#" title="" onclick="return false;">Login</a>
	</h2>

	<div id="loginblock" class="loginblock">
		<div id="loginblock-content">
			<div id="loginform">
				<form action="https://web.archive.org/web/20160408233100/http://delta3d.org/users.php" method="post" style="padding-bottom:5px;">
				<label for="loginname">Username:</label><br>
				<input type="text" size="10" name="loginname" value="" id="loginname"><br>
				
				<label for="passwd">Password:</label><br>
				<input type="password" size="10" name="passwd" id="passwd"><br>
				<input type="submit" name="submit_login" value="Login" style="margin-top:5px;">
				</form>
			</div>
			<p>Don't have an account yet?  Sign up as a <a href="https://web.archive.org/web/20160408233100/http://delta3d.org/users.php?mode=new" rel="nofollow">New User</a></p>
			<p>Lost your <a href="https://web.archive.org/web/20160408233100/http://delta3d.org/users.php?mode=getpassword" rel="nofollow">password</a>?</p>

		</div>
	</div>
    
	
</div>
<!-- /loginform.thtml -->
</div></div>
    </div>
<!-- End of Left blocks -->

        </div> <!-- end of gl_content_container -->
        <div id="gl_footer">
			<div id="footer_container">
			</div> <!-- end of footer_container -->
        </div> <!-- end of gl_footer-->

</div> <!-- end of container -->




    <!--[if lte IE 6]>
        <script type="text/javascript" src="http://delta3d.org/layout/purepro/js/gl_moopngfix.js" defer="defer" ></script>
    <![endif]-->

    <!--[if lt IE 7.]>
        <script defer type="text/javascript" src="http://delta3d.org/layout/purepro/js/pngfix.js"></script>
    <![endif]-->

</div></div></div>
<!-- End of layers -->

<script type="text/javascript">
var geeklogEditorBaseUrl = "https://web.archive.org/web/20160408233100/http://delta3d.org";
var geeklogEditorBasePath = "https://web.archive.org/web/20160408233100/http://delta3d.org/fckeditor/";
</script>
<script type="text/javascript" src="./Particle Systems Manipulation_files/common.js.download"></script>
<script type="text/javascript" src="./Particle Systems Manipulation_files/jquery.min.js.download"></script>




<!--
playback timings (ms):
  LoadShardBlock: 405.296 (3)
  PetaboxLoader3.datanode: 562.968 (4)
  CDXLines.iter: 24.344 (3)
  exclusion.robots.policy: 0.354
  exclusion.robots: 0.371
  load_resource: 336.333
  captures_list: 462.412
  RedisCDXSource: 28.22
  esindex: 0.017
  PetaboxLoader3.resolve: 110.357 (2)
--></body></html>